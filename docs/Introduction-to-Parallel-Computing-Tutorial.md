# 要約
このチュートリアルは，"Livermore Computing Getting Started "ワークショップの最初のチュートリアルです．このチュートリアルは，後続のチュートリアルへの導入として，並列コンピューティングという広範かつ広範なトピックの簡単な概要を提供することを目的としています．そのため，並列コンピューティングのごく基本的な部分をカバーしており，このテーマに慣れてきたばかりで，このワークショップの他のチュートリアルの1つ以上に参加する予定の人を対象としています．並列プログラミングを詳しく説明することは意図していませんが，それにはかなりの時間が必要となります．このチュートリアルでは，まず，並列コンピューティングとは何か，どのように使われるのか，という議論から始まり，続いて，並列コンピューティングに関連する概念や用語について説明します．続いて，並列メモリ・アーキテクチャとプログラミング・モデルのトピックを取り上げます．これらのトピックに続いて，並列プログラムの設計と実行に関する複雑な問題について，一連の実践的な議論が行われます．最後に，簡単なシリアル・プログラムを並列化するためのいくつかの例を挙げて締めくくります．また，参考文献も掲載していますので，自習にも最適です．

# 並列計算の概要
## 並列計算とは？
### 直列計算
従来，ソフトウェアは直列計算のために書かれてきました．
- 問題は離散的な一連の命令に分割されます．
- 命令は次々に実行される．
- 1台のプロセッサで実行される．
- どの時点でも1つの命令しか実行できない．
![serialproblem.gif](/philosophers/serialproblem.gif)
例
![serialproblem2.gif](/philosophers/serialproblem2.gif)

### 並列計算
並列計算とは，簡単に言えば，計算問題を解決するために複数の計算機資源を同時に使用することです．
- 問題は，同時に解くことができる個別のパーツに分割される．
- 各パーツはさらに一連の命令に分割されます．
- 各パーツの命令は，異なるプロセッサ上で同時に実行される．
- 全体的な制御調整メカニズムを採用する．
![parallelproblem.gif](/philosophers/parallelproblem.gif)
例
![parallelproblem2.gif](/philosophers/parallelproblem2.gif)

- 計算問題は以下のことが可能でなければなりません．
  - 同時に解くことができる個別の作業に分解されていること．
  - 複数のプログラム命令を任意のタイミングで実行できること．
  - 複数の計算資源を用いた方が，単一の計算資源を用いた場合よりも短時間で解けること．

- 計算機資源は，通常，以下のようなものです．
  - 複数のプロセッサコアを持つ1台のコンピュータ．
  - ネットワークで接続された任意の台数の計算機．

### 並列コンピュータ
- 今日，事実上すべてのスタンドアロンコンピュータは，ハードウェアの観点から並列化されています．
  - 複数の機能ユニット（L1キャッシュ，L2キャッシュ，ブランチ，プリフェッチ，デコード，浮動小数点，グラフィックスプロセッシング（GPU），整数など）．
  - 複数の実行ユニットコア
  - 複数のハードウェアスレッド
![bgqcomputechip.jpeg](/philosophers/bgqcomputechip.jpeg)
IBM BG/Q Compute Chip with 18 cores (PU) and 16 L2 Cache units (L2)

- ネットワークは，複数の独立したコンピュータ（ノード）を接続して，より大きな並列コンピュータ・クラスターを構成します．
![nodesnetwork.gif](/philosophers/nodesnetwork.gif)

- 例えば，下の図はLLNLの典型的な並列コンピュータクラスタを示しています．
  - 各計算ノードは，それ自体がマルチプロセッサの並列コンピュータです．
  - 複数の計算ノードが Infiniband ネットワークで結ばれています．
  - 同じくマルチプロセッサを搭載した特殊用途のノードは，他の目的に使用されます．
![parallelcomputer1.gif](/philosophers/parallelcomputer1.gif)

- 世界の大型並列コンピュータ（スーパーコンピュータ）の大半は，一握りの（ほとんど）有名ベンダーが製造するハードウェアのクラスターです．
Source: Top500.org

## 並列計算を使う理由
### 現実の世界は非常に複雑である
- 自然界では，多くの複雑で相互に関連した事象が，時間的な順序の中で，同時に起こっています．
- 直列計算と比較して，並列計算は，複雑な現実世界の現象をモデル化し，シミュレーションし，理解するのに適しています．
- 例えば，これらをシリアルでモデリングすることを想像してみてください．

### 主な理由
#### 時間とお金の節約
- 理論的には，より多くのリソースを投入することで，タスクの完了までの時間を短縮し，コストを削減することができます．
- 並列コンピュータは，安価な汎用部品で構成することができます．

#### より大きな，より複雑な問題を解決する
- 多くの問題は非常に大きく，複雑であるため，特にコンピュータのメモリが限られている場合には，シリアルプログラムで解決することは現実的ではなく，不可能です．
- 例: [グランドチャレンジ問題](https://en.wikipedia.org/wiki/Grand_Challenges)では，ペタフロップスやペタバイトのコンピューティングリソースが必要となります．
- 例: ウェブ検索エンジン毎秒数百万件のトランザクションを処理するデータベース．

#### 並行性の提供
- 1つのコンピュートリソースは，同時に1つのことしかできません．複数のコンピュートリソースは，同時に多くのことを行うことができます．
- 例: コラボレーションネットワークは，世界中の人々が "バーチャル"に集まり，仕事をすることができるグローバルな場を提供します．

#### 地域外のリソースを活用する
- ローカルな計算機資源が不足している場合に，広域ネットワークやインターネット上の計算機資源を利用すること．
- 例: SETI@home（setiathome.berkeley.edu）は，世界のほぼすべての国で170万人以上のユーザーが利用しています．(2018年5月)

#### 潜在する並列ハードウェアの有効活用
- 最近のコンピュータは，ノートパソコンであっても，複数のプロセッサコアを持つ並列アーキテクチャになっています．
- 並列ソフトウェアは，マルチコア，マルチスレッドなどの並列ハードウェアに対応しています．
- ほとんどの場合，現代のコンピュータで実行されるシリアルプログラムは，潜在的な計算能力を「浪費」しています．

#### 未来
- この20年以上の間に，ネットワークの高速化，分散システム，マルチプロセッサコンピュータのアーキテクチャ（デスクトップレベルでも）が示すトレンドは，並列処理がコンピューティングの未来であることを明確に示しています．
- 同時期に，スーパーコンピュータの性能は50万倍以上に向上しており，現在も終わりは見えません．
- エクサスケール・コンピューティングに向けた競争はすでに始まっており，私たちはエクサスケールの時代に入っています．
- エクサフロップ ＝ 1秒間に10の18乗回の計算
- US DOEエクサスケールプロジェクト： [https:/www.exascaleproject.org](https:/www.exascaleproject.org)

## 誰が並列計算を使っているのか？
### 科学と工学
- 歴史的に，並列計算は「計算機のハイエンド」と考えられており，科学や工学の多くの分野で難しい問題のモデル化に使われてきました．
- 大気，地球，環境
- 物理学-応用，核，粒子，凝縮系，高圧，核融合，フォトニクス
- バイオサイエンス，バイオテクノロジー，遺伝学
- 化学，分子科学
- 地質学，地震学
- 機械工学 - 義肢装具から宇宙船まで
- 電気工学，回路設計，マイクロエレクトロニクス
- コンピュータサイエンス，数学
- 防衛，兵器

### 産業と商業
- 今日では，商用アプリケーションが，より高速なコンピュータを開発するための同等以上の原動力となっています．これらのアプリケーションでは，大量のデータを高度に処理することが求められています．例えば
- "ビッグデータ"，データベース，データマイニング
- 人工知能(AI)
- 石油探査
- ウェブ検索エンジン，ウェブベースのビジネスサービス
- 医療用画像処理，診断
- 医薬品設計
- 金融・経済モデリング
- 国内および多国籍企業の経営
- エンタテインメント業界を中心とした高度なグラフィックスとバーチャルリアリティ
- ネットワークビデオおよびマルチメディア技術
- コラボレーションワーク環境

### グルーバルアプリケーション
- 並列コンピューティングは，現在，世界中で様々なアプリケーションに幅広く利用されています．

# コンセプトと用語
## フォン・ノイマン型コンピュータアーキテクチャ
![vonneumann2.jpeg](/philosophers/vonneumann2.jpeg)
John von Neumann circa 1940s
(Source: LANL archives)
- ハンガリーの数学者ジョン・フォン・ノイマンが1945年に発表した論文で，電子計算機の一般的な要件を初めて記述したことにちなんで名付けられました．
- ストアド・プログラム・コンピュータとも呼ばれ，プログラムの命令とデータの両方が電子メモリに保存されます．ハードワイヤリングによってプログラムされた初期のコンピュータとは異なります．
- これ以降，ほぼすべてのコンピュータがこの基本設計を踏襲しています．
![vonneumann1.gif](/philosophers/vonneumann1.gif)
- 4つの主要コンポーネントで構成されています。
  - メモリー
  - コントロールユニット
  - 演算ロジックユニット
  - 入力/出力
- 読み書き可能なランダムアクセスメモリーは、プログラム命令とデータの両方を格納するために使用されます．
- プログラム命令は、コンピュータに何かを指示するコード化されたデータです。
- データは、プログラムが使用するための単なる情報です。
- 制御ユニットは、メモリから命令やデータを取り出し、その命令をデコードし、プログラムされたタスクを達成するために操作を逐次調整します。
- 算術ユニットは、基本的な算術演算を行います．
- Input/Outputは、人間が操作するためのインターフェースです．

彼のその他の驚くべき業績については、[http://en.wikipedia.org/wiki/John_von_Neumann](http://en.wikipedia.org/wiki/John_von_Neumann) をご覧ください．
並列コンピュータは、この基本的なデザインを踏襲していますが、単位が倍になっただけです。基本となるアーキテクチャは同じです。

## フリンの古典的分類
- 並列コンピュータを分類する方法は様々です。参考文献にその例が掲載されています。
- 1966年から広く使われている分類の一つに「Flynnの分類法」というものがあります。
- フリンの分類法は、マルチプロセッサコンピュータのアーキテクチャを、「命令ストリーム」と「データストリーム」という2つの独立した次元に沿ってどのように分類できるかによって区別します。これらの次元は、それぞれ2つの可能な状態のうちの1つしかありません。「シングル」または「マルチ」です。
- 以下のマトリックスは、Flynn氏による4つの可能な分類を定義しています．
![flynnstaxonomy.gif](/philosophers/flynnstaxonomy.gif)
